<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;php&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="php">php</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the DNA API! You can use our API to access DNA API endpoints, which can get information on various elements customers, devices, and billing in our database.</p>

<p>We have language bindings in Shell and PHP we also have <a href='https://www.getpostman.com/collections/af70b4327c9f4ded36f5'>Postman</a> for you to test the methods without writing code! You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>

<p>This example API documentation page was created with <a href="https://github.com/tripit/slate">Slate</a>. </p>

<h1 id="api-flow">API Flow</h1>

<p>The Api offers different methods here are some flow examples so you can visualize how the information will flow:</p>

<h2 id="flow-diagram-legend">Flow Diagram Legend</h2>

<p><img src="images/legend.png" alt="Legend"></p>

<h2 id="create-client-method">Create Client Method</h2>

<p><img src="images/client.png" alt="Client"></p>

<h2 id="activate-client-method">Activate Client Method</h2>

<p><img src="images/activate.png" alt="Activate"></p>

<h2 id="suspend-client-method">Suspend Client Method</h2>

<p><img src="images/suspend.png" alt="Suspend"></p>

<h2 id="create-device-method">Create Device Method</h2>

<p><img src="images/device.png" alt="Device"></p>

<h1 id="authentication">Authentication</h1>

<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"https://staging.api.nexogy.com/api/oauth/token?grant_type=password&amp;client_id=&lt;value&gt;&amp;client_secret=&lt;value&gt;&amp;username=&lt;value&gt;&amp;password=&lt;value&gt;&amp;scope=&lt;value&gt;"</span>
  -H <span class="s2">"Accept: application/json"</span>
</code></pre><pre class="highlight php tab-php"><code>
</code></pre>
<blockquote>
<p>Make sure to replace the required <code class="prettyprint">&lt;value&gt;</code> with the information provided.</p>

<p>The above command returns a JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">  
     </span><span class="s2">"token_type"</span><span class="p">:</span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="mi">1200</span><span class="p">,</span><span class="w">
     </span><span class="s2">"access_token"</span><span class="p">:</span><span class="s2">"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjY1N2"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"refresh_token"</span><span class="p">:</span><span class="s2">"kvwLi6kTeq7DGbfsKLVvz/6zaCioe8Vk50x1QdlHJDFp4thYzPj5v"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<aside class="warning">It is very important that in order for this documentation to work, you must have requested access to the API and recieved the following information: </aside>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>grant_type</td>
<td>password</td>
<td>This value is constant.</td>
</tr>
<tr>
<td>client_id</td>
<td>?????</td>
<td>Once you&rsquo;ve been approved to use our API you&rsquo;ll receive this value.</td>
</tr>
<tr>
<td>client_secret</td>
<td>?????</td>
<td>Once you&rsquo;ve been approved to use our API you&rsquo;ll receive this value.</td>
</tr>
<tr>
<td>username</td>
<td>?????</td>
<td>Once you&rsquo;ve been approved to use our API you&rsquo;ll receive this value.</td>
</tr>
<tr>
<td>password</td>
<td>?????</td>
<td>Once you&rsquo;ve been approved to use our API you&rsquo;ll receive this value.</td>
</tr>
<tr>
<td>scope</td>
<td>?????</td>
<td>Once you&rsquo;ve been approved to use our API you&rsquo;ll receive this value.</td>
</tr>
</tbody></table>

<p>Once you have the values described above you can make the API calls using your <code>access_token</code> and the <code>token_type</code> .
To help with your development use Postman and add the following <a href="http://example.com/developers">Collection</a>.</p>

<p>DNA API expects for the <code>token_type</code> and <code>access_token</code> to be included in all API requests to the server in a header that looks like the following:</p>

<p><code class="prettyprint">Authorization:Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjY1N2</code></p>

<aside class="notice">
You must replace <code>`values`</code> with your provided values. and add the <code>token_type</code> and <code>access_token</code> as values for the <code>Authorization</code>headers for all your API calls.
Additionally use the <code>Accept:application/json</code> Headers for every API call.
</aside>

<h1 id="client">Client</h1>

<h2 id="create-a-client">Create a Client</h2>

<blockquote>
<p>To Create a new client, use this code:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://staging.api.nexogy.com/api/residential/client?email=&lt;value&gt;&amp;
first_name=&lt;value&gt;&amp;last_name=&lt;value&gt;&amp;zipcode=&lt;value&gt;&amp;address=&lt;value&gt;&amp;address2=&lt;value&gt;&amp;sameBillingAddress=&lt;values&gt;&amp;billing_zipcode=&lt;value&gt;&amp;billing_address=&lt;value&gt;&amp;billing_address2=&lt;value&gt;&amp;has_subreseller_id=&lt;value&gt;&amp;subreseller_id=&lt;value&gt;&amp;start_billing_date=&lt;value&gt;&amp;did_porting=&lt;value&gt;&amp;did_number=&lt;value&gt;"</span>
  -H <span class="s2">"Authorization:Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjY1N2"</span>
  -H <span class="s2">"Accept:application/json"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>
<span class="c1">// Set api url
</span><span class="nv">$apiUrl</span> <span class="o">=</span> <span class="s1">'https://staging.api.nexogy.com/api/residential/client'</span><span class="p">;</span>
<span class="c1">// Start cURL
</span><span class="nv">$c</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_CONNECTTIMEOUT</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// Populate array with parameters
</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'example@mail.com'</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'first_name'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'John'</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'last_name'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Doe'</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'zipcode'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'12345'</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'address'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Client address'</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'address2'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Client address 2'</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'sameBillingAddress'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'has_subreseller_id'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'subreseller_id'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'123'</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'billing_zipcode'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'12345'</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'start_billing_date'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'06/08/2017'</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'did_porting'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'did_number'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'3052304777'</span><span class="p">;</span>

<span class="c1">// Set up headers
</span><span class="nv">$request_headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Authorization: Bearer '</span><span class="o">.</span> <span class="nv">$access_token</span><span class="p">;</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Accept: application/json'</span><span class="p">;</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$request_headers</span><span class="p">);</span>

<span class="c1">// Setup the remainder of the cURL request
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$apiUrl</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$data</span><span class="p">));</span>

<span class="c1">// Execute the API call and return the response
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"client"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">92769</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ns_domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kerryking2.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"taxes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"breakdown"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"tax_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FL COMMUNICATIONS SERVICES TAX"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"percent_taxable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0000"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"tax_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FL 911 SURCHARGE"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"percent_taxable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0000"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"usage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Long Distance Calls"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"tax_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FEDERAL UNIVERSAL SERVICE FUND"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"percent_taxable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0000"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"tax_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LOCAL COMMUNICATIONS SVC. TAX"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"percent_taxable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0000"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"tax_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FL COMMUNICATIONS SERVICES TAX"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"percent_taxable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0000"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"tax_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FEDERAL TRS FUND"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"percent_taxable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0000"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"International Calls"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"tax_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FEDERAL UNIVERSAL SERVICE FUND"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"percent_taxable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0000"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"tax_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FL COMMUNICATIONS SERVICES TAX"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"percent_taxable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0000"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"tax_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FEDERAL TRS FUND"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"percent_taxable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0000"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"tax_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LOCAL COMMUNICATIONS SVC. TAX"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"percent_taxable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0000"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint creates a Client on DNA. You will get back a <code>id</code> and a <code>ns_domain</code> these will be required for other operations. Besides that, you will also get a tax breakdown and usage in percent.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://staging.api.nexogy.com/api/residential/client?email=&lt;value&gt;&amp;
first_name=&lt;value&gt;&amp;last_name=&lt;value&gt;&amp;zipcode=&lt;value&gt;&amp;address=&lt;value&gt;&amp;address2=&lt;value&gt;&amp;sameBillingAddress=&lt;values&gt;&amp;billing_zipcode=&lt;value&gt;&amp;billing_address=&lt;value&gt;&amp;billing_address2=&lt;value&gt;&amp;has_subreseller_id=&lt;value&gt;&amp;subreseller_id=&lt;value&gt;&amp;start_billing_date=&lt;value&gt;&amp;did_porting=&lt;value&gt;&amp;did_number=&lt;value&gt;</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<aside class="warning">This request has no default parameters or values. Ignoring this will result in an error.</aside>

<table><thead>
<tr>
<th>Parameter</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_billing_date</td>
<td>05/29/2017</td>
<td>Date in  MM/DD/YYYY Format for Billing purposes</td>
</tr>
<tr>
<td>customer_id</td>
<td>1234</td>
<td>Customer id you use on your side.</td>
</tr>
<tr>
<td>has_subreseller_id</td>
<td>1</td>
<td>This is an id used to group your client&rsquo;s IDs under a subreseller account if you have resellers that handle your clients this is how we would identify them for consolidation purposes. Accepts 1 or 0.</td>
</tr>
<tr>
<td>subreseller_id</td>
<td>1234</td>
<td>Send this parameter only if you use a subreseller structure.</td>
</tr>
<tr>
<td>email</td>
<td>email@email.com</td>
<td>Email used for any information required for the client, for example to send received V-mail.</td>
</tr>
<tr>
<td>first_name</td>
<td>Steve</td>
<td>First name for the client.</td>
</tr>
<tr>
<td>last_name</td>
<td>Harris</td>
<td>Last name for the client.</td>
</tr>
<tr>
<td>zipcode</td>
<td>33134</td>
<td>The client&rsquo;s zipcode.</td>
</tr>
<tr>
<td>address</td>
<td>126 Mendoza avenue</td>
<td>The client&rsquo;s address.</td>
</tr>
<tr>
<td>address2</td>
<td>apartment 7A</td>
<td>The client&rsquo;s second line address.</td>
</tr>
<tr>
<td>sameBillingAddress</td>
<td>1</td>
<td>Accepts 1 or 0 and determines if the address parameter will be used for billing, when 0 <code>billing_address</code> and <code>billing_zipcode</code> are required.</td>
</tr>
<tr>
<td>billing_address</td>
<td>2121 ponce de leon</td>
<td>The billing address.</td>
</tr>
<tr>
<td>billing_address2</td>
<td>2121 ponce de leon</td>
<td>The billing second line address.</td>
</tr>
<tr>
<td>billing_zipcode</td>
<td>33308</td>
<td>The billing zipcode.</td>
</tr>
<tr>
<td>did_porting</td>
<td>0</td>
<td>Acepts 1 or 0 depending on if the did_number you are providing is ported or no.</td>
</tr>
<tr>
<td>did_number</td>
<td>3052304999</td>
<td>Main phone number for the client.</td>
</tr>
</tbody></table>

<aside class="success">
Remember â€” store your <code>&lt;id&gt;</code> and <code>&lt;ns_domain&gt;</code> for future operations!
</aside>

<h2 id="activate-a-client">Activate a Client</h2>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://staging.api.nexogy.com/api/residential/client/&lt;id&gt;/activate"</span>
  -H <span class="s2">"Authorization:Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjY1N2"</span>
  -H <span class="s2">"Accept:application/json"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>
<span class="c1">// Set api url
</span><span class="nv">$apiUrl</span> <span class="o">=</span> <span class="s1">'https://staging.api.nexogy.com/api/residential/client/id/activate'</span><span class="p">;</span>
<span class="c1">// Start cURL
</span><span class="nv">$c</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_CONNECTTIMEOUT</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// Set up headers
</span><span class="nv">$request_headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Authorization: Bearer '</span><span class="o">.</span> <span class="nv">$access_token</span><span class="p">;</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Accept: application/json'</span><span class="p">;</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$request_headers</span><span class="p">);</span>

<span class="c1">// Setup the remainder of the cURL request
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$apiUrl</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// Execute the API call and return the response
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="cp">?&gt;</span>

</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496930642</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>This endpoint activates a specific client. If the client was previously cancelled, it activates the client on Netsapiens and sets the billing_status to active on DNA.</p>

<aside class="warning">You will need the <code>&lt;id&gt;</code> for this operation</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://staging.api.nexogy.com/api/residential/client/&lt;id&gt;/activate</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The ID of the client to activate,the one we sent you when the client was created</td>
</tr>
</tbody></table>

<h2 id="suspend-a-client">Suspend a Client</h2>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://staging.api.nexogy.com/api/residential/client/&lt;id&gt;/suspend"</span>
  -H <span class="s2">"Authorization:Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjY1N2"</span>
  -H <span class="s2">"Accept:application/json"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>
<span class="c1">// Set api url
</span><span class="nv">$apiUrl</span> <span class="o">=</span> <span class="s1">'https://staging.api.nexogy.com/api/residential/client/id/suspend'</span><span class="p">;</span>
<span class="c1">// Start cURL
</span><span class="nv">$c</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_CONNECTTIMEOUT</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// Set up headers
</span><span class="nv">$request_headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Authorization: Bearer '</span><span class="o">.</span> <span class="nv">$access_token</span><span class="p">;</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Accept: application/json'</span><span class="p">;</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$request_headers</span><span class="p">);</span>

<span class="c1">// Setup the remainder of the cURL request
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$apiUrl</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// Execute the API call and return the response
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496940922</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint suspends a Client. It just locked the client on Netsapiens. This is different from the cancel endpoint.</p>

<aside class="warning">You will need the <code>&lt;id&gt;</code> for this operation</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://staging.api.nexogy.com/api/residential/client/&lt;id&gt;/suspend</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The ID of the client to suspend, the one we sent you when the client was created</td>
</tr>
</tbody></table>

<h2 id="cancel-a-client">Cancel a Client</h2>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://staging.api.nexogy.com/api/residential/client/&lt;id&gt;/cancel"</span>
  -H <span class="s2">"Authorization:Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjY1N2"</span>
  -H <span class="s2">"Accept:application/json"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>
<span class="c1">// Set api url
</span><span class="nv">$apiUrl</span> <span class="o">=</span> <span class="s1">'https://staging.api.nexogy.com/api/residential/client/id/cancel'</span><span class="p">;</span>
<span class="c1">// Start cURL
</span><span class="nv">$c</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_CONNECTTIMEOUT</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// Set up headers
</span><span class="nv">$request_headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Authorization: Bearer '</span><span class="o">.</span> <span class="nv">$access_token</span><span class="p">;</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Accept: application/json'</span><span class="p">;</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$request_headers</span><span class="p">);</span>

<span class="c1">// Setup the remainder of the cURL request
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$apiUrl</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// Execute the API call and return the response
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496931834</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint cancels a Client. It performs two operations, first suspends the client domain on Netsapiens and then set the billing_status of the client to suspended.</p>

<aside class="warning">You will need the <code>&lt;id&gt;</code> for this operation</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://staging.api.nexogy.com/api/residential/client/&lt;id&gt;/cancel</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The ID of the client to cancel, the one we sent you when the client was created</td>
</tr>
</tbody></table>

<h2 id="get-status">Get Status</h2>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://staging.api.nexogy.com/api/residential/domain/&lt;domain&gt;"</span>
  -H <span class="s2">"Authorization:Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjY1N2"</span>
  -H <span class="s2">"Accept:application/json"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>
<span class="c1">// Set api url
</span><span class="nv">$apiUrl</span> <span class="o">=</span> <span class="s1">'https://staging.api.nexogy.com/api/residential/domain/&lt;domain&gt;'</span><span class="p">;</span>
<span class="c1">// Start cURL
</span><span class="nv">$c</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_CONNECTTIMEOUT</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// Set up headers
</span><span class="nv">$request_headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Authorization: Bearer '</span><span class="o">.</span> <span class="nv">$access_token</span><span class="p">;</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Accept: application/json'</span><span class="p">;</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$request_headers</span><span class="p">);</span>

<span class="c1">// Setup the remainder of the cURL request
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$apiUrl</span><span class="p">);</span>

<span class="c1">// Execute the API call and return the response
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496259363</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint gets the status of a domain. Status are locked or active</p>

<aside class="warning">You will need the <code>&lt;domain&gt;</code> for this operation</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://staging.api.nexogy.com/api/residential/domain/&lt;domain&gt;</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>domain</td>
<td>The domain name of the client.</td>
</tr>
</tbody></table>

<h2 id="update">Update</h2>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://staging.api.nexogy.com/api/residential/client/&lt;id&gt;"</span>
  -H <span class="s2">"Authorization:Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjY1N2"</span>
  -H <span class="s2">"Accept:application/json"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>
<span class="c1">// Set api url
</span><span class="nv">$apiUrl</span> <span class="o">=</span> <span class="s1">'https://staging.api.nexogy.com/api/residential/client/&lt;id&gt;'</span><span class="p">;</span>
<span class="c1">// Start cURL
</span><span class="nv">$c</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_CONNECTTIMEOUT</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// Populate array with parameters
</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'start_billing_date'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'06/08/2017'</span><span class="p">;</span>

<span class="c1">// Set up headers
</span><span class="nv">$request_headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Authorization: Bearer '</span><span class="o">.</span> <span class="nv">$access_token</span><span class="p">;</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Accept: application/json'</span><span class="p">;</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$request_headers</span><span class="p">);</span>

<span class="c1">// Setup the remainder of the cURL request
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$apiUrl</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$data</span><span class="p">));</span>

<span class="c1">// Execute the API call and return the response
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496941963</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint updates the information of a client in DNA. For now it&rsquo;s only available for the start_billing_date field.</p>

<aside class="warning">You will need the <code>&lt;id&gt;</code> for this operation</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://staging.api.nexogy.com/api/residential/client/&lt;id&gt;</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_billing_date</td>
<td>06/08/2017</td>
<td>Date in  MM/DD/YYYY Format for Billing purposes.</td>
</tr>
</tbody></table>

<h1 id="device">Device</h1>

<p>Once a Client is Created a default device is created, additional devices may be created later, with the device method.</p>

<h2 id="device-method">Device method</h2>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://staging.api.nexogy.com/api/residential/device?client_id=&lt;value&gt;&amp;domain=&lt;value&gt;&amp;ext=&lt;value&gt;"</span>
  -H <span class="s2">"Authorization:Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjY1N2"</span>
  -H <span class="s2">"Accept:application/json"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>
<span class="c1">// Set api url
</span><span class="nv">$apiUrl</span> <span class="o">=</span> <span class="s1">'https://staging.api.nexogy.com/api/residential/device'</span><span class="p">;</span>
<span class="c1">// Start cURL
</span><span class="nv">$c</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_CONNECTTIMEOUT</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// Populate array with parameters
</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'domain'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'06/08/tomaraya.com'</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'client_id'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'12345'</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'ext'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'1003'</span><span class="p">;</span>

<span class="c1">// Set up headers
</span><span class="nv">$request_headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Authorization: Bearer '</span><span class="o">.</span> <span class="nv">$access_token</span><span class="p">;</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Accept: application/json'</span><span class="p">;</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$request_headers</span><span class="p">);</span>

<span class="c1">// Setup the remainder of the cURL request
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$apiUrl</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$data</span><span class="p">));</span>

<span class="c1">// Execute the API call and return the response
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="cp">?&gt;</span>

&gt; The above command returns JSON structured like this:

```json
{
 "result": "OK",
 "data": {
   "subscriber_name": "1012",
   "aor": "sip:1012@kirkhammet.com",
   "domain": "kirkhammet.com",
   "authentication_key": "encrypted key",
   "regservers": {
     "server1": {
       "address": "sandbox.nexogy.net",
       "port": "5092"
     }
   },
   "timestamp": 1496682921
 }
}
</code></pre>
<p>The Device method behaves different according to the parameters it receives. You can pass the domain or the client_id, no need to pass both. If no ext is sent the default extension is created, in this case extension=1000 and the device information is returned. If a number is sent in this parameter and the device exists this method returns device information. If a number is sent and the device doesn&rsquo;t exist, that device for that extension is created.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://staging.api.nexogy.com/api/residential/device?client_id=&lt;value&gt;&amp;domain=&lt;value&gt;&amp;ext=&lt;value&gt;</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td>The client ID of the requested device. You get this information whe the client was created.</td>
</tr>
<tr>
<td>domain</td>
<td>The domain you received when the client was created.</td>
</tr>
<tr>
<td>extension</td>
<td>This parameter is optional. This is the extension of the customer&rsquo;s device. If no device is sent the default extension is created, in this case extension=1000 and the device information is returned. If a number is sent in this parameter and the device exists this method returns device information. If a number is sent and the device doesn&rsquo;t exist, that device for that extension is created.</td>
</tr>
</tbody></table>

<h3 id="json-response">JSON Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>subscriber_name</td>
<td>The Devices extension number.</td>
</tr>
<tr>
<td>aor</td>
<td>The identifier of device and The domain.</td>
</tr>
<tr>
<td>authentication_key</td>
<td>The SIP password for the device. For security reasons we use gpg for encryption. You will recieve this parameter encrypted in Base 64 using gpg. With the Public Key you previously sent to us.</td>
</tr>
<tr>
<td>regservers</td>
<td>an array with the available registration servers and ports, this is required for your configuration.</td>
</tr>
</tbody></table>

<p>Refer to this documentation in order to generate the key here:</p>

<p><a href='https://help.github.com/articles/generating-a-new-gpg-key/'>Documentation for gpg</a></p>

<aside class="warning">Send us the public key indicated in step 13 of the <code>gpg</code> documentation found above. For this operation.</aside>

<h1 id="did">Did</h1>

<h2 id="search-dids">Search Dids</h2>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://staging.api.nexogy.com/api/dids/search?npa=&lt;value&gt;&amp;state=&lt;value&gt;"</span>
  -H <span class="s2">"Authorization:Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjY1N2"</span>
  -H <span class="s2">"Accept:application/json"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>
<span class="c1">// Set api url
</span><span class="nv">$apiUrl</span> <span class="o">=</span> <span class="s1">'https://staging.api.nexogy.com/api/dids/search'</span><span class="p">;</span>
<span class="c1">// Start cURL
</span><span class="nv">$c</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_CONNECTTIMEOUT</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// Populate array with parameters
</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'npa'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'305'</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'state'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'FL'</span><span class="p">;</span>

<span class="c1">// Set up headers
</span><span class="nv">$request_headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Authorization: Bearer '</span><span class="o">.</span> <span class="nv">$access_token</span><span class="p">;</span>
<span class="nv">$request_headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Accept: application/json'</span><span class="p">;</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$request_headers</span><span class="p">);</span>

<span class="c1">// Setup the remainder of the cURL request
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$apiUrl</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$data</span><span class="p">));</span>

<span class="c1">// Execute the API call and return the response
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"return"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"npas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"npa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"305"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
      </span><span class="s2">"consecutive"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tn"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">3052304666</span><span class="p">,</span><span class="w">
            </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vanity"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">3052304777</span><span class="p">,</span><span class="w">
            </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vanity"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">3052304999</span><span class="p">,</span><span class="w">
            </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vanity"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">3054344555</span><span class="p">,</span><span class="w">
            </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vanity"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">3054344600</span><span class="p">,</span><span class="w">
            </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vanity"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">3054344777</span><span class="p">,</span><span class="w">
            </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vanity"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"tnCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoit conducts a search by area code and state name and returns available did numbers to be used when creating a new client.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://staging.api.nexogy.com/api/dids/search?npa=&lt;value&gt;&amp;state=&lt;value&gt;</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>npa</td>
<td>Area code of the desired number.</td>
</tr>
<tr>
<td>state</td>
<td>State of the desired number.</td>
</tr>
</tbody></table>

<h2 id="provision-911-did">Provision 911 Did</h2>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://staging.api.nexogy.com/api/residential/e911?client_id=&lt;value&gt;&amp;address1=&lt;value&gt;&amp;address2=&lt;value&gt;&amp;city=&lt;value&gt;&amp;state=&lt;value&gt;&amp;zip=&lt;value&gt;&amp;force=&lt;value&gt;"</span>
  -H <span class="s2">"Authorization:Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjY1N2"</span>
  -H <span class="s2">"Accept:application/json"</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>
<span class="c1">// Set api url
</span><span class="nv">$apiUrl</span> <span class="o">=</span> <span class="s1">'https://staging.api.nexogy.com/api/residential/e911'</span><span class="p">;</span>
<span class="c1">// Start cURL
</span><span class="nv">$c</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_CONNECTTIMEOUT</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// Populate array with parameters
</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'client_id'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'6559'</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'address1'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'1111 Somestreet st'</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'address2'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'city'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'City;
$data['</span><span class="nx">state</span><span class="s1">'] = '</span><span class="nx">ST</span><span class="s1">';
$data['</span><span class="nx">zip</span><span class="s1">'] = '</span><span class="mi">33000</span><span class="s1">';
$data['</span><span class="nx">force</span><span class="s1">'] = '</span><span class="mi">0</span><span class="s1">';

// Set up headers
$request_headers = array();
$request_headers[] = '</span><span class="nx">Authorization</span><span class="o">:</span> <span class="nx">Bearer</span> <span class="s1">'. $access_token;
$request_headers[] = '</span><span class="nx">Accept</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">json</span><span class="err">'</span><span class="p">;</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$request_headers</span><span class="p">);</span>

<span class="c1">// Setup the remainder of the cURL request
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$apiUrl</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$data</span><span class="p">));</span>

<span class="c1">// Execute the API call and return the response
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1498572262</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint sets the 911 address for the number associated to the client. Behind the scenes it has two layers of address validation, the first one using UPS API and the second one uses Bandwidth API. For the request to be successful it has to go through both layers. In case the address is not valid but the validation services have other options, they will be presented to the user with the message &ldquo;ambiguous address&rdquo;, so the user may select any of them. In case the validation services can&rsquo;t provide valid options, the user will get a message of &ldquo;invalid address&rdquo; and the action won&rsquo;t be completed.</p>

<p>If the user wants to use an invalid address anyway, the parameter &ldquo;force=1&rdquo; would need to be sent to be passed with value 1.</p>

<aside class="warning">Our recommendation is to first validate the address using the provided services and it the address is still correct after validadion then force it. Do not force addresses unless there&rsquo;s no other option. </aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://staging.api.nexogy.com/api/residential/e911?client_id=&lt;value&gt;&amp;address1=&lt;value&gt;&amp;address2=&lt;value&gt;&amp;city=&lt;value&gt;&amp;state=&lt;value&gt;&amp;zip=&lt;value&gt;&amp;force=&lt;value&gt;</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td>The client ID. You get this information when the client was created. This parameter is required.</td>
</tr>
<tr>
<td>address1</td>
<td>Street address. This parameter is required.</td>
</tr>
<tr>
<td>address2</td>
<td>Second line of street address. This parameter is not required.</td>
</tr>
<tr>
<td>city</td>
<td>City name. This parameter is required.</td>
</tr>
<tr>
<td>state</td>
<td>State name. This parameter is required.</td>
</tr>
<tr>
<td>zip</td>
<td>Zipcode. This parameter is required.</td>
</tr>
<tr>
<td>force</td>
<td>Wether the address will be forced or not (1 or 0). This parameter is not required.</td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<aside class="notice">These errors have evolved with the API&rsquo;s and business&rsquo; requirements. Verify these errors frequently</aside>

<p>The DNA API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request â€“ Your request sucks!</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized â€“ Your token key is wrong or has expired.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden â€“ The object requested is hidden for your Scope.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found â€“ The specified object could not be found, invalid URL.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed â€“ You tried to access an object with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable â€“ You requested an invalid parameter or your parameters are not validated.</td>
</tr>
<tr>
<td>410</td>
<td>Gone â€“ The object you requested has been removed from our servers.</td>
</tr>
<tr>
<td>418</td>
<td>Undefined Error.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests â€“ Youâ€™re making too much requests! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error â€“ We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable â€“ Weâ€™re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="php">php</a>
          </div>
      </div>
    </div>
  </body>
</html>
